<html>
<head>
<script type="text/javascript" src="/js/onlinetuner.js"></script>
<script type="text/javascript" src="/js/analyser.js"></script>
<script type="text/javascript" src="/js/controller.js"></script>
<script type="text/javascript" src="/js/widget.js"></script>
<script type="text/javascript" src="/js/fft.js"></script>
<script type="text/javascript">
	function start() {
	
	
		//install fft capture
		//800 Hz for guitare
		var analyser = new OnlineTuner.Analyser(800.0);
		
		//create viewer
		var views = [ 
			new OnlineTuner.Controller.BarChart(new OnlineTuner.BarChartWidget(OnlineTuner.$('barChartView')), analyser), 
			new OnlineTuner.Controller.GuitareTuner(new OnlineTuner.CircleWidget(OnlineTuner.$('tunerView')), analyser)
		];
		
		analyser.install(function() {
			setInterval(function() {
				//requestAnimationFrame(update);
				analyser.update();
		
		        for(var id in views) {
					views[id].update();
				}
			}, 100);
		});
	}
</script>
</head>
<body onload="start()">
<canvas width="400" height="400" id="tunerView"></canvas>
<canvas width="400" height="70" id="barChartView"></canvas>
<p id="noteView"></p>
</body>
</html>
